schemaVersion: 2.2.0
metadata:
  name: che-docs
components:
  - name: tools
    container:
      args:
        - tail
        - "-f"
        - "/dev/null"
      endpoints:
        - exposure: public
          name: livereload
          protocol: https
          targetPort: 35729
        - attributes:
            path: /
          exposure: public
          name: preview-server
          protocol: https
          targetPort: 4000
      image: "quay.io/eclipse/che-docs:next"
      env:
        - name: SHELL
          value: /bin/bash
      memoryLimit: 2Gi
      memoryRequest: 256Mi
commands:
  - exec:
      commandLine: sh tools/preview.sh
      component: tools
      group:
        isDefault: true
        kind: build
      workingDir: "${PROJECT_SOURCE}"
    id: start-preview-server